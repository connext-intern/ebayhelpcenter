<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.connext.ebayhelpcenter.dao.ManagerDao">
<<<<<<< c41e6016299d0c4964e6e8b5d52ca401595e544f
    <resultMap id="ebayFirstMenus" type="com.connext.ebayhelpcenter.model.EbayFirstMenus">
        <id column="first_id" property="firstId"/>
        <result property="firstTitle" column="first_title"/>
        <result property="firstSerial" column="first_serial"/>
        <collection property="secondMenuses" ofType="com.connext.ebayhelpcenter.model.EbaySecondMenus">
            <id column="second_id" property="secondId" javaType="int" jdbcType="INTEGER"/>
            <result column="second_title" property="secondTitle" javaType="string" jdbcType="VARCHAR"/>
            <result column="second_serial" property="secondSerial" javaType="int" jdbcType="INTEGER"/>
            <result column="content" property="content" javaType="string" jdbcType="LONGVARCHAR"/>
            <result column="html" property="html" javaType="string" jdbcType="LONGVARCHAR"/>
            <result column="second_first_id" property="secondFirstId" javaType="int" jdbcType="INTEGER"/>
        </collection>
    </resultMap>
    <select id="queryAll" resultType="com.connext.ebayhelpcenter.model.EbayFirstMenus">
        SELECT first_title FROM ebay_first_menus
    </select>
    <select id="listAllTitle" resultMap="ebayFirstMenus">
        SELECT f.first_id,s.second_id,f.first_title,s.second_title
        FROM ebay_first_menus f left join ebay_second_menus s
        ON  f.first_id=s.second_first_id
        ORDER BY f.first_serial,s.second_serial
    </select>
    <select id="queryKeyWords" parameterType="String" resultType="com.connext.ebayhelpcenter.model.EbaySecondMenus">
        select second_title,content,second_id from ebay_second_menus where html like '%${value}%'
    </select>
    <select id="queryContent" resultType="com.connext.ebayhelpcenter.model.EbaySecondMenus">
        select second_title,content from ebay_second_menus where second_id=#{VALUE}
    </select>

    <!-- 查询是否存在该二级菜单 -->
    <select id="hasSecondMenu" resultType="boolean">
        <![CDATA[ SELECT count(*) FROM ebay_second_menus WHERE second_id = #{secondId} ]]>
    </select>

    <!-- 删除该二级菜单 -->
    <delete id="deleteSecondMenuInfo">
        DELETE FROM ebay_second_menus WHERE second_id = #{secondId}
    </delete>

    <!-- 查询一级菜单下是否存在二级菜单 -->
    <select id="firstHasSecondMenus" resultType="boolean">
        <![CDATA[ SELECT count(*) FROM ebay_second_menus WHERE second_first_id = #{firstId} ]]>
    </select>

    <!-- 删除一级菜单下的所有二级菜单信息 -->
    <delete id="deleteSecondMenusInfoFromFirst">
        DELETE FROM ebay_second_menus WHERE second_first_id = #{firstId}
    </delete>

    <!-- 删除一级菜单 -->
    <delete id="deleteFirstMenuInfo">
        DELETE from ebay_first_menus WHERE first_id = #{firstId}
    </delete>

</mapper>